
<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <meta name="description" content="Moving away from create-react-app & learning to bundle my own assets" />
        <link rel="stylesheet" href="/assets/styles/grotesk.light.min.css">
        <link rel="stylesheet" href="/assets/styles/highlights.min.css">
        <link rel="stylesheet" href="/assets/styles/main.min.css">
        <title>My new react workflow with parcel</title>
    </head>
    <body>
        <div class="grotesk">
            <header>
                <a href="/">Go back home</a>
                <p>—</p>
            </header>

            <div class="content">
                <h1>My new react workflow with parcel</h1>
                <p>Fri Apr 03 2020</p>
                <hr />
                <p>I’ve almost always used create-react-app as my react starter, sometimes Gatsby or Next.js for Static Sites &amp; Server Side Rendering respectively, but mostly create-react-app for all my Single Page Apps. However as some of you might know the internals of create-react-app are abstracted away using the react-scripts package. This helps beginners like me get easily started without having to worry about webpack. But I was curious on how it actually worked and decided to make a react application from scratch.</p>
<p>While learning about bundlers I discovered <a href="https://parceljs.org/">parcel</a> a bundler that requires zero configuration and works right out of the box. This got me really excited and after a few steps I got parcel working with react as well, here’s how I set it up. Also make sure to stick around till the end to see a super easy way to get started using a tiny package I made.</p>
<h2 id="step-0">Step 0</h2>
<p>If you don&#39;t have node &amp; npm installed already then go ahead and download both of their latest versions for your system from the previous links.</p>
<h2 id="step-1">Step 1</h2>
<p>Create a directory for your project, on Windows I used the following commands I&#39;m sure you can translate them over to your OS.</p>
<pre><code class="language-bash">mkdir react-with-parcel
<span class="hljs-built_in">cd</span> react-with-parcel</code></pre>
<h2 id="step-2">Step 2</h2>
<p>Initialize an npm project and download your dependencies with the following commands:</p>
<pre><code class="language-bash">npm init -y
npm i -D parcel-bundler @babel/core @babel/preset-env @babel/preset-reactnpm i react react-dom</code></pre>
<p>As you can see we initialize an npm project using <code>npm init</code> the <code>-y</code> flag is just there so it doesn&#39;t ask you the default questions. Then we install parcel-bundler and a few babel packages as dev dependencies (that&#39;s why the <code>-D</code> flag is used) and also <code>react</code> &amp; <code>react-dom</code> as regular dependencies. I&#39;m currently still using parcel v1 (i.e the parcel-bundler npm package not parcel) that&#39;s because parcel v2 is still in alpha and not yet stable. However once it is stable it promises some amazing features like out of the box support for jsx so we wouldn&#39;t even have to configure babel.</p>
<h2 id="step-3">Step 3</h2>
<p>Now that we have all our dependencies installed we can actually create our application. Parcel works on the principal of having one html file as it&#39;s entry point (you can have multiple as well) and then uses that to bundle all the assets. So let&#39;s create an <code>index.html</code> file. Personally I put this file in a <code>src</code> directory but if you want you can directly put it in the root directory of your project. However make sure to change the path in the following steps.</p>
<pre><code class="language-html"><span class="hljs-comment">&lt;!--The src/index.html file--&gt;</span>

<span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-meta-keyword">html</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">"en"</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">"UTF-8"</span> /&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"viewport"</span> <span class="hljs-attr">content</span>=<span class="hljs-string">"width=device-width, initial-scale=1.0"</span> /&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>Parcel &amp; React<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"root"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"./index.js"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span></code></pre>
<p>As you can see we create a <code>div</code> with the id of &quot;root&quot; and then use a script tag to link to our JavaScript file. So let&#39;s create that JavaScript file.</p>
<pre><code class="language-js"><span class="hljs-comment">// The src/index.js file</span>

<span class="hljs-keyword">import</span> React <span class="hljs-keyword">from</span> <span class="hljs-string">"react"</span>;
<span class="hljs-keyword">import</span> ReactDom <span class="hljs-keyword">from</span> <span class="hljs-string">"react-dom"</span>;
<span class="hljs-keyword">import</span> <span class="hljs-string">"./index.css"</span>;

<span class="hljs-keyword">const</span> App = <span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>Hello World<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span></span>;

ReactDom.render(<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">App</span> /&gt;</span></span>, <span class="hljs-built_in">document</span>.getElementById(<span class="hljs-string">"root"</span>));</code></pre>
<p>We&#39;ve kept the file very simple but you can very easily import other components &amp; css files either from your files or from npm packages. SInce I&#39;ve imported &quot;./index.css&quot; let&#39;s go ahead &amp; make that file:</p>
<pre><code class="language-css"><span class="hljs-comment">/* The src/index.css file */</span>

* {
  <span class="hljs-attribute">margin</span>: <span class="hljs-number">0</span>;
  <span class="hljs-attribute">padding</span>: <span class="hljs-number">0</span>;
  <span class="hljs-attribute">box-sizing</span>: border-box;
}

<span class="hljs-selector-tag">html</span> {
  <span class="hljs-attribute">font-family</span>: -apple-system, BlinkMacSystemFont, <span class="hljs-string">"Segoe UI"</span>, Roboto, Oxygen,
    Ubuntu, Cantarell, <span class="hljs-string">"Open Sans"</span>, <span class="hljs-string">"Helvetica Neue"</span>, sans-serif;
}

<span class="hljs-selector-tag">code</span> {
  <span class="hljs-attribute">font-family</span>: <span class="hljs-string">"Courier New"</span>, Courier, monospace;
}</code></pre>
<p>We&#39;ve kept it very basic just some small resets and system fonts.</p>
<h2 id="step-4">Step 4</h2>
<p>We&#39;re almost done! Now go to your <code>package.json</code> and add the <code>start</code> &amp; the <code>build</code> scripts. This is an example of how your <code>package.json</code> will look now:</p>
<pre><code class="language-json">{
  <span class="hljs-attr">"name"</span>: <span class="hljs-string">"react-with-parcel"</span>,
  <span class="hljs-attr">"version"</span>: <span class="hljs-string">"1.0.0"</span>,
  <span class="hljs-attr">"description"</span>: <span class="hljs-string">""</span>,
  <span class="hljs-attr">"main"</span>: <span class="hljs-string">"index.js"</span>,
  <span class="hljs-attr">"scripts"</span>: {
    <span class="hljs-attr">"start"</span>: <span class="hljs-string">"parcel src/index.html"</span>,
    <span class="hljs-attr">"build"</span>: <span class="hljs-string">"parcel build src/index.html"</span>
  },
  <span class="hljs-attr">"keywords"</span>: [],
  <span class="hljs-attr">"author"</span>: <span class="hljs-string">""</span>,
  <span class="hljs-attr">"license"</span>: <span class="hljs-string">"ISC"</span>,
  <span class="hljs-attr">"dependencies"</span>: {
    <span class="hljs-attr">"react"</span>: <span class="hljs-string">"^16.13.1"</span>,
    <span class="hljs-attr">"react-dom"</span>: <span class="hljs-string">"^16.13.1"</span>
  },
  <span class="hljs-attr">"devDependencies"</span>: {
    <span class="hljs-attr">"@babel/core"</span>: <span class="hljs-string">"^7.9.0"</span>,
    <span class="hljs-attr">"@babel/preset-env"</span>: <span class="hljs-string">"^7.9.0"</span>,
    <span class="hljs-attr">"@babel/preset-react"</span>: <span class="hljs-string">"^7.9.4"</span>,
    <span class="hljs-attr">"parcel-bundler"</span>: <span class="hljs-string">"^1.12.4"</span>
  }
}</code></pre>
<p>All we&#39;re doing is calling parcel &amp; giving it the html file we want to use &amp; for building a production build we call parcel build &amp; again give it the html file. Parcel build will output to the dist directory in your project.</p>
<h2 id="and-youre-done">And you&#39;re done</h2>
<p>That&#39;s it just open up a terminal &amp; run <code>npm start</code> and a development server should start up on <a href="https://localhost:1234">https://localhost:1234</a>. Amazing right!</p>
<h2 id="making-this-even-easier">Making this even easier</h2>
<p>Since I expect to be doing this many more times I decided to make a tiny npm package to bootstrap the project for me. So that it would be just as easy as create-react-app. And I&#39;m finally done with the package I called it <code>parcreate</code> and you can run it in your terminals now.</p>
<pre><code class="language-bash"><span class="hljs-comment"># The recommended way: (so that you have the latest version)</span>
npx parcreate my-apps-name

<span class="hljs-comment"># The old fashioned way:</span>
npm i -g parcreate
parcreate my-apps-name</code></pre>
<p>Creating <code>parcreate</code> was a lot of fun and I will be adding more templates with additional features like <code>scss</code> very soon so keep a lookout.</p>
<p>You can find the github repo for parcreate <a href="https://github.com/kartiknair/parcreate">here</a> and please let me know if you face any issues running it as I&#39;ve only tested it on windows yet. Thank you all for reading about my findings &amp; be sure to stay safe. Bye!</p>
<p>P.S. I’m trying to be more active on social media &amp; meet more people so drop me a message on my twitter (@nairkartik_).</p>

            </div>

            <footer>
                <p>© 2020 Kartik Nair, Find the code on <a href="github.com/kartiknair/blog">GitHub</a></p>
            </footer>
        </div>
    </body>
</html>
